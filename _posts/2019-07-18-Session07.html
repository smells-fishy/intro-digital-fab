---
layout: post
title:  "07: Electronic Input Devices"
permalink: /07/
---

<p class="collapsible">Class (July 18)</p>

<div id="1" class="content">

<p>Although I usually don't document lectures, Thursday's lecture was a lot of fun and I got to annoy people a lot with a circuit I made, so I think for all future students, this will be a good learning experience on how to get kicked out of the classroom when you do input devices.</p>

<p>This lecture, we investigated sensors. The most interesting sensor to me was the capacitor plates, since I think they have a lot of practical applications. For example, we were able to make sensors for touch using the capacitor plates.</p>

<img src="capsense.jpg" style="height: 200px; width: auto; display: block;" alt="The touch sensor">

<p>However, I had other ideas. I noticed that the serial grapher put out waveforms that reminded me of waveforms commonly seen in music, like square and saw waves. I just felt like I had to investigate the potential of making noise with the output from the touch sensor.</p>

<img src="serial.jpg" style="height: 200px; width: auto; display: block;" alt="The serial graph">

<p>Rob caught me out at a good time and gave a buzzer (I suspect that it's piezoelectric but I'm not sure) and told me about a function called <span markdown="1" style="background-color: lightgray; font-family:Courier New;">tone()</span> in the standard Arduino library. Its syntax is <span markdown="1" style="background-color: lightgray; font-family:Courier New;">tone(pin, frequency)</span>, where pin is the digital output pin that the buzzer is connected to and frequency is the frequency to output.</p>

<p>I initially tested the <span markdown="1" style="background-color: lightgray; font-family:Courier New;">tone()</span> function by writing a program to make a buzzer output the relatively pleasant A 440 Hz tone. This was accomplished by wiring the buzzer to pin 9 and ground and writing the line <span markdown="1" style="background-color: lightgray; font-family:Courier New;">tone(9, 440)</span>. This experiment proved to be relatively successful, in sense that it worked and that it didn't blow out my eardrums.</p>

<div>

<img src="A.png" style="height: 200px; width: auto; display: block;" alt="The program for A 440">
<img src=Acir.jpg style="height: 200px; width: auto; display: block;" alt="The circuit schematic">

</div>

<p>Next, I added the buzzer to the touch sensor circuit, using the 9 and ground pins again. Immediately, the buzzer started outputting the most bizzare noises. When I touched the capacitor, it resulted in painfully high-pitched dog-whistle-like noises.</p>

<img src="capnoise.jpg" style="height: 200px; width: auto; display: block;" alt="The noisemaking circuit">
<img src="noisemaker.png" style="height: 200px; width: auto; display: block;" alt="The noisemaking program">
<video height="400px" controls>
	<source src="SOUND.MOV" type="video/mp4">
</video>

<p>What is interesting is that the maximum output (which occurs when I touch the capacitor plate) of the touch sensor is well over 300,000, which is far above the hearing limit of a human. The fact that the buzzer still played any audible noise at all suggests that the <span markdown="1" style="background-color: lightgray; font-family:Courier New;">tone()</span> function has a built-in <span markdown="1" style="background-color: lightgray; font-family:Courier New;">map()</span> function in order to ensure that the buzzer is always output audible noise. Alternatively, the buzzer is mechanically limited to audible noise and therefore wouldn't output noises above the human audible limit in any case.</p>

<p>In any case, this was a really interesting experiment. I would like to further explore the idea of making an instrument with the plates, although that may be difficult with my final project, model of Harvard Yard, and attempt to recreate quantum mechanical experiments on a budget on my plate already.</p>

<p>For reference, my code is available for download <a href="sound.zip" download>here</a>.</p>

<p class="mini" id="2" style="color: blue; font-size: 16px; padding:0px;">Minimize</p>

</div>

<p class="collapsible">Extra Lab! Woah! (July 19)</p>

<div id="3" class="content">

<p>I was so excited to get started with my replication of the "loss of diffraction pattern" experiment that I took an extra lab this week. I came in with the idea to explore how to detect loose electrons from photons colliding with molecules, so I immediately thought capacitor plate and electromagnetic fields.</p>

<p>I started by exploring eletromagnetic field (EMF) sensors. I looked around on the internet and I chanced upon a post on the Arduino Create forum by user justin1445. Although his circuit, program, and project had many flaws, his project was the inspiration for my exploration and therefore inspiration credit should go to him.</p>

<p>This simple EMF sensor required a 330 Ohm resistor, a 100k Ohm resistor, a generic colored LED, and Arduino Uno, and a paperclip. These materials were gathered in the laboratory, and I immediate got to work building the circuit as shown by his schematics.</p>

<img src="emf1.png" style="height: 200px; width: auto; display: block;" alt="The original circuit">
<img src="emfcode1.png" style="height: 200px; width: auto; display: block;" alt="The original code">

<p>Shown above is justin1445's original circuit and the corresponding code. All credit for these diagrams goes to him. In essence, this is just an antenna wired in parallel to the analog input pin 0 with an LED that is programmed to activate when a current is induced in the antenna by an electromagnetic field. The <span markdown="1" style="background-color: lightgray; font-family:Courier New;">constrain()</span> function in conjunction with the <span markdown="1" style="background-color: lightgray; font-family:Courier New;">map()</span> function essentially behaves as an in-code analog-to-digital converter (ADC). However, this code is flawed. The constrain function already limits the analog inputs to being between 1 and 100, which is less than a tenth of the values readable (from 0 to 1023), which renders the intended PWM output to the LED from pin 11 entirely meaningless, as any signal reading above 100 on the analog input will be ingored. I don't really understand the need for this ADC in the code in any case, but it was included by the author of the project anyway.</p>

<p>This circuit proved to just return 255, so I got to work changing up the circuit. Initially, I was confused by the circuit's function, but Soumya quickly reminded me that the best way to troubleshoot is just to keep it simple. I took out all of the junk and just wired the antenna in parallel to A0 and ground. I also removed the unnecessary ADC functionality from the code. It was at this point that I realized I was looking at a simple RF reciever. I immedately started getting strange outputs, with values rapidly fluctuating between two dynamic bottom and upper limits. The addition of an averaging function didn't help reduce the noise, so I added a <span markdown="1" style="background-color: lightgray; font-family:Courier New;">delay(1000/60)</span> (1000/60 correspondes to 1/60th of second) to correspond to a 60 Hz frequency to cause an aliasing effect. As expected, I got a more stretched sinusoidal wave.</p>

<h4 class="collapsible" style="font-size = 1em;";>Danger: Brain Damage Possible From Viewing This Section. Only Proceed if Experienced in Physics.</h4>

<div id="5" class="content">

<p>The remainder of the lab was spent attempting to construct a low-pass filter. I will go into more detail about what filters are later, but the intention was to filter out the high-frequency electronic noise influencing my antenna.</p>

<h5>Resistor-capacitor (RC) circuits</h5>

<p>What is an RC circuit and what does it have to do with filters? RC circuits are circuits that have a resistor and a capacitor wired in parallel, and they are best known for their role in frequency filters. RC circuits are characterized by the time it takes for their capacitor to be discharged to the initial voltage divided by e, which is represented by the Greek letter &tau; and equal to resistance times capacitance.</p>

<img src="RCtau.png" style="height: 200px; width: auto; display: block;" alt="A graph showing tau vs voltage">
<p>(Image from <a href="https://en.wikipedia.org/wiki/RC_circuit" target="blank">Wikipedia</a>)

<p>As you can see, tau occurs when the capacitor voltage is 63% charged. Alternatively, it is when the capacitor voltage is discharged to 37%.</p>

<p>The principle of the RC time constant &tau; is significant because it plays a large role in the calculations for resistor and capacitor ratings needed to filter certain frequencies.</p>

<h5>Low-pass filters</h5>

<p>Low-pass filters are designed to allow only low-frequency data to be read. The simplest low-pass filter is an RC circuit where the antenna is wired in series to a resistor and in parallel to a grounded capacitor.</p>

<img src="lowsche.png" style="height: 200px; width: auto; display: block;" alt="A schematic for a simple RC low-pass filters">
<p>(Image from <a href="https://en.wikipedia.org/wiki/Low-pass_filter" target="blank">Wikipedia</a>)

<p>This circuit works due to the reactance of the circuit (resistance to change in voltage due to capacitance). Since the low-frequency electromagnetic radiation doesn't switch polarity rapidly, it will be able to slowly charge the capacitor. The capacitor will resist changes in its state (uncharged capacitors tend to stay uncharged), and therefore the low-frequency radiation will be passed to the load, or the analog input in our case. On the other hand, the high frequency radtiation changes polarity rapidly enough that it cannot charge the capacitor and the capacitor will act as a short, leading the high-frequency radiation straight to ground and removing it from the data readings. Another explanation of this phenomenon is that direct current (low frequency EM radiation) doesn't flow well through a capacitor, while alternating current (high frequency EM radiation) does, resulting in a prefered flow to ground for the high-frequency induced current.</p>

<p>It is also possible to determine the maximum frequency the circuit will be able to read. This frequency is defined by one divided by 2 times pi times the RC time constant.</p>

<img src="cutoff.png" style="height: 200px; width: auto; display: block;" alt="The cutoff frequency formula">
<p>(Image from <a href="https://en.wikipedia.org/wiki/Low-pass_filter" target="blank">Wikipedia</a>)

<h5>High-pass filters</h5>

<p>High-pass filters are designed to allow only high-frequency data to be read. The simpled high-pass filter is an RC circuit with the antenna wired in series to the capacitor and in parallel to a resistor.</p>

<p class="mini" id="6" style="color: blue; font-size: 16px; padding:0px;">Minimize</p>

</div>

<p class="mini" id="4" style="color: blue; font-size: 16px; padding:0px;">Minimize</p>

</div>

<script>
	//Expanding script
	var coll = document.getElementsByClassName("collapsible");
	var i;

	for (i = 0; i < coll.length; i++) {
	  coll[i].addEventListener("click", function() {
	    this.classList.toggle("active");
	    var content = this.nextElementSibling;
	    if (content.style.display === "block") {
	      content.style.display = "none";
				this.classList.toggle("active");
	    } else {
	      content.style.display = "block";
				this.classList.toggle("active");
	    }
	  });
	}
	//Minimizing script
	var mini = document.getElementsByClassName("mini");
	var i;

	for (i = 0; i < mini.length; i++) {
	  mini[i].addEventListener("click", function() {
	    this.classList.toggle("active");
			var id = this.id - 1;
	    var content = document.getElementById(id);
	    if (content.style.display === "block") {
	      content.style.display = "none";
				this.classList.toggle("active");
	    } else {
	      content.style.display = "block";
				this.classList.toggle("active");
	    }
	  });
	}


</script>
